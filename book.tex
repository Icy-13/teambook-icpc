\documentclass[leter]{amsart}
\usepackage[pdftex]{geometry}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}

\usepackage{listings}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{multicol}
\usepackage{courier}
\usepackage{fancyhdr}
\usepackage{indentfirst}
\usepackage{yhmath}

\lstset{language=C++}
\lstset{columns=fullflexible}
\lstset{basicstyle=\scriptsize\ttfamily}
\lstset{showspaces=false}

\geometry{landscape}
\setlength{\topmargin}{-0.25in}
\setlength{\oddsidemargin}{0in}
\setlength{\evensidemargin}{0in}
\setlength{\columnsep}{1in}
\setlength{\columnseprule}{0.2pt}
\textwidth 9.5in

\pagestyle{fancy}
\lhead{Мяу-принцессы: ИТМО}
\chead{}
\rhead{\thepage}
\lfoot{}
\cfoot{}
\rfoot{}

\newcommand{\includecpp}[3]{
  \begin{multicols}{2}
    [\subsection{#1}\ ]
    \lstinputlisting[language=c++]{#2/#3}
  \end{multicols}
}

\newcommand{\stirlingfirst}[2]{\genfrac{[}{]}{0pt}{}{#1}{#2}}
\newcommand{\stirlingsecond}[2]{\genfrac{\{}{\}}{0pt}{}{#1}{#2}}
\newcommand{\norm}[1]{\lVert#1\rVert}

\begin{document}

\begin{multicols}{1}
  	\tableofcontents
\end{multicols}

\pagebreak

\section{Шаблон}

\includecpp{Шаблон}{./algos}{template.cpp}

\pagebreak

\section{Структуры данных}

\includecpp{СНМчик}{./algos}{dsu.cpp}
\includecpp{ДД}{./algos}{treap.cpp}
\includecpp{Неявное ДД}{./algos}{implicit_treap.cpp}

\pagebreak

\section{Строки}

\includecpp{Строки}{./algos}{strings.cpp}

\pagebreak

\section{Деревья}

\includecpp{lca}{./algos}{lca.cpp}
\includecpp{hld}{./algos}{hld.cpp}

\pagebreak

\section{Матеша}

\includecpp{Алгебра}{./algos}{algebra.cpp}
\includecpp{Длинка и интмод}{./algos}{long_ar.cpp}
\includecpp{Геома (old)}{./algos}{geometry.cpp}

\pagebreak

\end{document}